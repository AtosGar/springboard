{
  "main": "org.entcore.infra.Starter",
  "port": 8001,
  "mode": "dev",
  "auto-redeploy": false,
  "path-prefix": "infra",

  "app-registry": {
    "name": "org.entcore~app-registry~1.12-SNAPSHOT",
    "config": {
      "main":"org.entcore.registry.AppRegistry",
      "auto-redeploy": false,
      "mode": "dev",
      "ssl" : false,
      "address" : "wse.app.registry",
      "port" : 8012
    }
  },
  "pre-required-modules": [
  {
    "name": "fr.wseduc~mod-neo4j-persistor~1.4.1",
    "config": {
      "worker": true,
      "multi-threaded": true,
      "address": "wse.neo4j.persistor",
      
          "server-uri": "http://localhost:7474/db/data/",
          "poolsize": 32
            
    }
  },
  
  
    {
      "name": "com.campudus~json-schema-validator~1.1.0",
      "config": {
        "address": "json.schema.validator",
        "schemas": []
      }
    }
  ],
  "external-modules": [
    {
      "name": "io.vertx~mod-mongo-persistor~2.0.2-final-WSE",
      "config": {
        "worker": true,
        "multi-threaded": true,
        "address": "wse.mongodb.persistor",
        "host": "localhost",
        "port": 27017,
        "db_name": "one_gridfs",
        "pool_size": 10
      }
    },
    {
      "name": "fr.wseduc~mod-gridfs-persistor~1.2.0",
      "config": {
        "worker": true,
        "multi-threaded": true,
        "address": "wse.gridfs.persistor",
        "host": "localhost",
        "port": 27017,
        "db_name": "one_gridfs",
        "pool_size": 10
      }
    },{
      "name" : "fr.wseduc~mod-image-resizer~1.1.0",
      "config" : {
        "worker": true,
        "multi-threaded": true,
        "address" : "wse.image.resizer",
        "gridfs" : {
          "host": "localhost",
          "port": 27017,
          "db_name": "one_gridfs",
          "pool_size": 10
        }
      }
    },
    {
      "name": "io.vertx~mod-mailer~2.0.0-final",
      "config": {
        "address": "wse.email",
        "content_type": "text/html"
      }
    },
    {
      "name": "fr.wseduc~mod-zip~1.0.1",
      "config": {
        "address": "entcore.zipper"
      }
    },
    {
      "name": "com.wse.tracer~tracer~1.0.0",
      "config": {
        "auto-redeploy": false,
        "logger-name": "one.tracer",
        "address": "log.address",
        "log-path": "data/log"
      }
    },
    {
      "name": "org.entcore~auth~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.auth.Auth",
        "port": 8009,
        "auto-redeploy": false,
        "ssl" : false,
        "mode": "dev",
        "email": "noreply@entcore.org",
        "authenticationServer": {
          "loginURL": "http://localhost:8090/auth/login",
          "logoutURL": "http://localhost:8090/auth/logout",
          "loginCallback": "http://localhost:8090",
          "logoutCallback": "http://localhost:8090"
        },
        "host": "http://localhost:8090"
      }
    },
    {
      "name": "org.entcore~directory~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.directory.Directory",
        "auto-redeploy": false,
        "ssl" : false,
        "mode": "dev",
        "host": "http://localhost:8090",
        "port": 8003,
        "email": "noreply@entcore.org",
        "workspace-url": "localhost",
        "workspace-port":8011,
        "workspace-prefix" : "/workspace",
        "user-book-data":{
          "default-theme":"default",
          "default-avatar": "no-avatar.jpg",
          "default-mood" : "default",
          "hobbies": ["sport","cinema", "animals", "music", "places", "books"]
        }
      }
    },
    {
      "name": "org.entcore~workspace~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.workspace.Workspace",
        "auto-redeploy": false,
        "mode": "dev",
        "ssl" : false,
        "host": "http://localhost:8090",
        "neo4jPluginUri" : "http://localhost:7474",
        "userbook-host": "http://localhost:8090",
        "app-name": "Espace documentaire",
        "app-address": "/workspace/workspace",
        "app-icon": "workspace-large",
        "port": 8011,
        "mongo-address" : "wse.mongodb.persistor",
        "gridfs-address" : "wse.gridfs.persistor"
      }
    },
    {
      "name": "org.entcore~session~1.12-SNAPSHOT",
      "config": {
        "session_timeout": 10800000,
        "worker": true,
        "address" : "wse.session"
      }
    },
    {
      "name": "org.entcore~communication~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.communication.Communication",
        "auto-redeploy": false,
        "ssl" : false,
        "mode": "dev",
        "port": 8015,
        "address" : "wse.communication",
        "initDefaultCommunicationRules" :
        
          {
            "Structure-Personnel" : {
              "users" : "BOTH", "communiqueWith" : ["Structure-Teacher", "Structure-Relative", "Structure-Student"]
            },
            "Structure-Teacher" : {
              "users" : "BOTH", "communiqueWith" : ["Structure-Personnel", "Structure-Relative", "Structure-Student"]
            },
            "Structure-Student" : {"users" : "OUTGOING"},
            "Structure-Relative" : {"users" : "OUTGOING"},
            "Class-Personnel" : {"users" : "OUTGOING"},
            "Class-Teacher" : {"users" : "OUTGOING"},
            "Class-Student" : {
              "users" : "BOTH", "communiqueWith" : ["Class-Personnel", "Class-Teacher"]
            },
            "Class-Relative" : {
              "users" : "BOTH", "Relative-Student" : "INCOMING", "communiqueWith" : ["Class-Personnel", "Class-Student", "Class-Teacher"]
            }
          }
       
      }
    },
    {
      "name": "org.entcore~portal~1.12-SNAPSHOT",
      "config": {
        "port": 8017,
        "auto-redeploy": false,
        "ssl" : false,
        "mode": "dev",
        "skin": "leo",
        
           "assets-path": "../..",
        
        "path-prefix": "",
                "root-page": "/timeline/timeline",
        "urls": {
          "userbook": "/userbook",
          "auth": "/auth",
          "portal": "/",
          
          "logoutCallback": "/"
          
        },
        "admin-urls": [
          {"name": "directory", "url": "/directory/admin-console"},
          {"name": "appRegistry", "url": "/appregistry/admin-console"},
          {"name": "communication", "url": "/communication/admin-console"}
        ],
        "widgets": [
         
            {"name": "calendar","path": "/public/template/calendar.html","js": "/public/js/calendar.js"},{"name": "notes","path": "/public/template/notes.html","js": "/public/js/notes.js"},{"name": "actualites","path": "/actualites/public/template/last-infos-widget.html","js": "/actualites/public/js/last-infos-widget.js","i18n": "/actualites/i18n"},{"name": "rss","path": "/rss/public/template/rss-widget.html","js": "/rss/public/js/rss-widget.js","i18n": "/rss/i18n"}
         
        ],
        "themes": [
         
            {
              "_id": "default",
              "displayName": "default",
              "path": "/assets/themes/raw/default/"
            }, {
              "_id": "magenta",
              "displayName": "magenta",
              "path": "/assets/themes/raw/magenta/"

            }
         
            ],
            "resources-applications": [
              "workspace", "blog", "actualites", "wiki", "pages", "poll", "timelinegenerator", "rack"
            ]
      }
    },
    {
      "name": "org.entcore~conversation~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.conversation.Conversation",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "app-address": "/conversation/conversation",
        "port": 8019,
        "app-name" : "Messagerie",
        "app-icon" : "conversation-large"
      }
    },
    {
      "name": "org.entcore~feeder~1.12-SNAPSHOT",
      "config": {
        "worker": true,
        "address" : "entcore.feeder",
        "neo4j-address" : "wse.neo4j.persistor",
        "apply-communication-rules" : true,
        
        "import-files" : "../../sample-be1d",
        "feeder" : "BE1D",
        "exporter" : "ELIOT",
        "export-path" : "/tmp",
        "export-destination" : ""
      }
    },
    {
      "name": "org.entcore~timeline~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.timeline.Timeline",
        "port": 8016,
        "address" : "wse.timeline",
        "auto-redeploy": false,
        "ssl" : false,
        "mode": "dev"
      }
    },
    {
      "name": "org.entcore~cas~1.12-SNAPSHOT",
      "config": {
        "main" : "org.entcore.cas.Cas",
        "port" : 8023,
        "app-name" : "Cas",
        "app-address" : "/cas",
        "app-icon" : "cas-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "app-registry.port" : 8012,
        "mode" : "dev",
        "entcore.port" : 8009,
        "services" : [
          {
            "class" : "org.entcore.cas.services.EliotRegisteredService",
            "principalAttributeName" : "externalId",
            "patterns" : []
          },
          {
            "class" : "org.entcore.cas.services.PronoteRegisteredService",
            "principalAttributeName" : "login",
            "patterns" : []
          },
          {
            "class" : "org.entcore.cas.services.KneRegisteredService",
            "principalAttributeName" : "login",
            "patterns" : []
          },
          {
            "class" : "org.entcore.cas.services.LeSiteTvRegisteredService",
            "principalAttributeName" : "login",
            "patterns" : []
          },
          {
            "class" : "org.entcore.cas.services.UniversalisRegisteredService",
            "principalAttributeName" : "login",
            "patterns" : []
          },
          {
            "class" : "org.entcore.cas.services.UidRegisteredService",
            "principalAttributeName" : "login",
            "patterns" : []
          },
			{
			  "class" : "org.entcore.cas.services.DefaultRegisteredService",
			  "principalAttributeName" : "login",
			  "patterns" : ["^(http|https):\/\/.*"]
			}
        ]
      }
    },
    {
      "name": "org.entcore~archive~1.12-SNAPSHOT",
      "config": {
        "main":"org.entcore.archive.Archive",
        "port": 8004,
        "mode": "dev",
        "host": "http://localhost:8090",
        "ssl" : false,
        "email": "noreply@entcore.org",
        "auto-redeploy": false,
        "app-name" : "Archive",
        "app-address" : "/archive",
        "app-icon" : "archive-large",
        "expected-exports" : ["workspace"]
      }
    }
,
    {
      "name": "net.atos~actualites~0.4-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.actualites.Actualites",
        "port" : 8022,
        "app-name" : "Actualites",
        "app-address" : "/actualites",
        "app-icon" : "actualites-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "app-registry.port" : 8012,
        "mode" : "dev",
        "entcore.port" : 8009
      }
    }
,
{
  "name": "org.entcore~blog~1.11-SNAPSHOT",
    "config": {
      "main":"org.entcore.blog.Blog",
      "port": 8018,
      "address" : "wse.blog",
      "auto-redeploy": false,
      "ssl" : false,
      "host": "http://localhost:8090",
      "userbook-host": "http://localhost:8090",
      "mode": "dev"
    }
}
,
    {
      "name": "net.atos~community~0.1-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.community.Community",
        "port" : 8078,
        "app-name" : "Community",
        "app-address" : "/community",
        "app-icon" : "community-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "mode" : "dev"
      }
    }
,
    {
      "name": "fr.wseduc~eliot~0.1-SNAPSHOT",
      "config": {
        "main" : "fr.wseduc.eliot.Eliot",
        "port" : 8029,
        "exported-delay" : 600000,
        "appli-code" : "",
        "uri" : "",
        "eliotUri" : "",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "mode" : "dev"
      }
    }
,
    {
  		"name": "net.atos~forum~0.4-SNAPSHOT",
  		"config": {
  		  "main" : "net.atos.entng.forum.Forum",
  		  "port" : 8024,
  		  "app-name" : "Forum",
  		  "app-address" : "/forum",
  		  "app-icon" : "forum-large",
  		  "host": "http://localhost:8090",
  		  "ssl" : false,
  		  "auto-redeploy": false,
  		  "userbook-host": "http://localhost:8090",
  		  "integration-mode" : "HTTP",
  		  "app-registry.port" : 8012,
  		  "mode" : "dev",
  		  "entcore.port" : 8009
  		}
	  }
,
    {
      "name": "fr.wseduc~pages~0.4-SNAPSHOT",
      "config": {
        "main" : "fr.wseduc.pages.Pages",
        "port" : 8025,
        "app-name" : "Pages",
        "app-address" : "/pages",
        "app-icon" : "pages-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "mode" : "dev"
      }
    }
,
  	{
      "name": "net.atos~poll~0.1-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.poll.Poll",
        "port" : 8031,
        "app-name" : "Poll",
        "app-address" : "/poll",
        "app-icon" : "poll-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "app-registry.port" : 8012,
        "mode" : "dev",
        "entcore.port" : 8009
      }
    }
,
{
    "name": "fr.wseduc~rack~0.2-SNAPSHOT",
    "config": {
        "main" : "fr.wseduc.rack.Rack",
        "port" : 8031,
        "app-name" : "rack",
        "app-address" : "/rack",
        "app-icon" : "rack-large",
        "app-displayName" : "rack",
        "host": "http://localhost:8090",
        "ssl" :  false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "mode": "dev"
    }
}
,
    {
      "name": "net.atos~rbs~0.4-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.rbs.Rbs",
        "port" : 8026,
        "sql" : true,
        "mongodb" : false,
        "neo4j" : false,
        "app-name" : "Réservation de ressources",
        "app-address" : "/rbs",
        "app-icon" : "rbs-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "mode" : "dev"
      }
    }
,
  	{
  		"name": "net.atos~rss~0.3-SNAPSHOT",
  		"config": {
  		  "main" : "net.atos.entng.rss.Rss",
  		  "port" : 8028,
  		  "app-name" : "Rss",
  		  "app-address" : "/rss",
  		  "app-icon" : "rss-large",
  		  "host": "http://localhost:8090",
  		  "ssl" : false,
  		  "auto-redeploy": false,
  		  "userbook-host": "http://localhost:8090",
  		  "integration-mode" : "HTTP",
  		  "app-registry.port" : 8012,
  		  "mode" : "dev",
  		  "entcore.port" : 8009
  		}
  	}
,
    {
      "name": "net.atos~support~0.3-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.support.Support",
        "port" : 8027,
        "sql" : true,
        "mongodb" : false,
        "neo4j" : false,
        "app-name" : "Aide et support",
        "app-address" : "/support",
        "app-icon" : "support-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "mode" : "dev",
        "bug-tracker-host" : "support.web-education.net",
        "bug-tracker-port" : 80,
        "bug-tracker-api-key" : "f8ffdbfb0ee9bae2448713d70172b7df0142d270",
        "bug-tracker-projectid" : 39,
        "escalation-httpclient-maxpoolsize" : 16,
        "escalation-httpclient-keepalive" : false,
        "escalation-httpclient-tryusecompression" : true,
        "refresh-period" : 15
      }
    }
,
    {
      "name": "net.atos~timelinegenerator~0.1-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.timelinegenerator.TimelineGenerator",
        "port" : 8099,
        "app-name" : "TimelineGenerator",
        "app-address" : "/timelinegenerator",
        "app-icon" : "timelinegenerator-large",
        "mode": "dev",
        "integration-mode" : "HTTP",
        "app-registry.port" : 8012,
        "entcore.port" : 8090
      }
    }
,
    {
      "name": "net.atos~wiki~0.4-SNAPSHOT",
      "config": {
        "main" : "net.atos.entng.wiki.Wiki",
        "port" : 8030,
        "app-name" : "Wiki",
        "app-address" : "/wiki",
        "app-icon" : "wiki-large",
        "host": "http://localhost:8090",
        "ssl" : false,
        "auto-redeploy": false,
        "userbook-host": "http://localhost:8090",
        "integration-mode" : "HTTP",
        "mode" : "dev"
      }
    }

    ,{
      "name": "fr.wseduc~http-proxy~1.1.0",
      "config": {
        "port": 8090,
        "proxies": [
          {
            "location": "/",
            "proxy_pass": "http://localhost:8017"
          },
          {
            "location": "/infra",
            "proxy_pass": "http://localhost:8001"
          },
          {
            "location": "/directory",
            "proxy_pass": "http://localhost:8003"
          },
          {
            "location": "/auth",
            "proxy_pass": "http://localhost:8009"
          },
          {
            "location": "/workspace",
            "proxy_pass": "http://localhost:8011"
          },
          {
            "location": "/appregistry",
            "proxy_pass": "http://localhost:8012"
          },
          {
            "location": "/communication",
            "proxy_pass": "http://localhost:8015"
          },
          {
            "location": "/userbook",
            "proxy_pass": "http://localhost:8003"
          },
          {
            "location": "/conversation",
            "proxy_pass": "http://localhost:8019"
          },
          {
            "location": "/timeline",
            "proxy_pass": "http://localhost:8016"
          },
          {
            "location": "/cas",
            "proxy_pass": "http://localhost:8023"
          },
          {
            "location": "/archive",
            "proxy_pass": "http://localhost:8004"
          }
,
          {
            "location": "/actualites",
            "proxy_pass": "http://localhost:8022"
          },
          {
            "location": "/blog",
            "proxy_pass": "http://localhost:8018"
          },
          {
            "location": "/community",
            "proxy_pass": "http://localhost:8078"
          },
          {
            "location": "/eliot",
            "proxy_pass": "http://localhost:8029"
          },
          {
            "location": "/forum",
            "proxy_pass": "http://localhost:8024"
          },
          {
            "location": "/pages",
            "proxy_pass": "http://localhost:8025"
          },
          {
            "location": "/poll",
            "proxy_pass": "http://localhost:8031"
          },
          {
            "location": "/rack",
            "proxy_pass": "http://localhost:8031"
          },
          {
            "location": "/rbs",
            "proxy_pass": "http://localhost:8026"
          },
          {
            "location": "/rss",
            "proxy_pass": "http://localhost:8028"
          },
          {
            "location": "/support",
            "proxy_pass": "http://localhost:8027"
          },
          {
            "location": "/timelinegenerator",
            "proxy_pass": "http://localhost:8099"
          },
          {
            "location": "/wiki",
            "proxy_pass": "http://localhost:8030"
          }        ]
      }
    }
  ]
}